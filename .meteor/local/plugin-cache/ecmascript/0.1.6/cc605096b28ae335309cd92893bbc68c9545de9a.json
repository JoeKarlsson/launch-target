{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"//Global variable for setting default zoom in google maps\nvar MAP_ZOOM = 16;\nvar results;\n\n//When app starts load google maps\nMeteor.startup(function () {\n  GoogleMaps.load({ v: '3', key: 'AIzaSyAG_bYopvQf3H2lrQBNfKJyo4fic2ETdFI', libraries: 'geometry,places' });\n});\n\n//Pull latitude and longitude from google maps api and return location zoom\nTemplate.map.helpers({\n  //If there is an error finding the current users geoloaction - spit out error to the DOM\n  geolocationError: function () {\n    var error = Geolocation.error();\n    return error && error.message;\n  },\n\n  //Set out map options\n  mapOptions: function () {\n    var latLng = Geolocation.latLng();\n    Session.set('latLng', latLng);\n\n    //Initialize the map once we  have the latLng.\n    if (GoogleMaps.loaded() && latLng) {\n      return {\n        center: new google.maps.LatLng(latLng.lat, latLng.lng),\n        zoom: MAP_ZOOM,\n        // This is where you would paste any style found on Snazzy Maps.\n        styles: [{ \"featureType\": \"all\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"administrative\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"administrative.country\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"administrative.province\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"landscape\", \"elementType\": \"geometry\", \"stylers\": [{ \"visibility\": \"on\" }, { \"color\": \"#e3e3e3\" }] }, { \"featureType\": \"landscape\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"landscape.man_made\", \"elementType\": \"geometry.fill\", \"stylers\": [{ \"saturation\": \"0\" }, { \"lightness\": \"6\" }, { \"weight\": \"0.90\" }] }, { \"featureType\": \"landscape.man_made\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"landscape.natural\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"off\" }, { \"lightness\": \"0\" }] }, { \"featureType\": \"poi\", \"elementType\": \"geometry.fill\", \"stylers\": [{ \"visibility\": \"simplified\" }] }, { \"featureType\": \"poi\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi.attraction\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"simplified\" }] }, { \"featureType\": \"poi.attraction\", \"elementType\": \"geometry\", \"stylers\": [{ \"visibility\": \"simplified\" }] }, { \"featureType\": \"poi.attraction\", \"elementType\": \"geometry.fill\", \"stylers\": [{ \"visibility\": \"simplified\" }] }, { \"featureType\": \"poi.attraction\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi.business\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi.business\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi.government\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"simplified\" }] }, { \"featureType\": \"poi.government\", \"elementType\": \"geometry\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi.government\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi.medical\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi.park\", \"elementType\": \"geometry.fill\", \"stylers\": [{ \"visibility\": \"on\" }, { \"color\": \"#e6f0d7\" }] }, { \"featureType\": \"poi.place_of_worship\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi.school\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi.sports_complex\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"road\", \"elementType\": \"all\", \"stylers\": [{ \"color\": \"#cccccc\" }] }, { \"featureType\": \"road\", \"elementType\": \"geometry\", \"stylers\": [{ \"visibility\": \"on\" }] }, { \"featureType\": \"road\", \"elementType\": \"geometry.fill\", \"stylers\": [{ \"saturation\": \"0\" }, { \"lightness\": \"30\" }] }, { \"featureType\": \"road\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"visibility\": \"on\" }] }, { \"featureType\": \"road\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"transit\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"transit\", \"elementType\": \"labels.icon\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"transit.line\", \"elementType\": \"geometry\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"transit.line\", \"elementType\": \"labels.text\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"transit.station\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"transit.station.airport\", \"elementType\": \"geometry\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"transit.station.airport\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"water\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#FFFFFF\" }] }, { \"featureType\": \"water\", \"elementType\": \"geometry.fill\", \"stylers\": [{ \"lightness\": \"-28\" }, { \"saturation\": \"33\" }, { \"color\": \"#f2f8fd\" }] }, { \"featureType\": \"water\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }]\n\n      };\n    }\n  },\n  allTargets: function () {\n    return Session.get('allTargets');\n  }\n});\n\n//Create google maps marker for current location\nTemplate.map.onCreated(function () {\n  var self = this;\n\n  GoogleMaps.ready('map', function (map) {\n    //get lat and long from current location\n    //IDEA: after getting the current location - save to a session variable so we can use and reuse it.\n    var latLng = Geolocation.latLng();\n\n    //variable within scope that sets current location\n    var currentPost = new google.maps.LatLng(latLng.lat, latLng.lng);\n\n    //variable that creates a new instance of marker information display\n    var infowindow = new google.maps.InfoWindow();\n\n    //Gold star SVG to mark current location\n    var goldStar = {\n      path: 'M 125,5 155,90 245,90 175,145 200,230 125,180 50,230 75,145 5,90 95,90 z',\n      fillColor: 'yellow',\n      fillOpacity: 0.8,\n      scale: .25,\n      strokeColor: 'gold',\n      strokeWeight: 5\n    };\n\n    //drop marker on current location\n    var marker = new google.maps.Marker({\n      position: currentPost,\n      map: map.instance,\n      icon: goldStar,\n      animation: google.maps.Animation.DROP\n    });\n\n    var infoWindowContent = '<h5>You are here</h5>';\n\n    //event listener that loads resturant information into infowindow.\n    google.maps.event.addListener(marker, 'click', function () {\n      infowindow.setContent(infoWindowContent);\n      infowindow.open(map.instance, this);\n    });\n\n    //get surrounding restaurants within radius\n    //call on the document of food which is an array of objects\n    var service = new google.maps.places.PlacesService(map.instance);\n    service.nearbySearch({\n      location: currentPost,\n      radius: 1500,\n      types: ['bakery', 'food', 'restaurant']\n    }, callback);\n\n    //Error checking to check for status of query\n    function callback(results, status) {\n      if (status === google.maps.places.PlacesServiceStatus.OK) {\n\n        var targets = results.map(function (target) {\n          createMarker(target);\n          var targetDetail = {\n            name: target.name,\n            placeId: target.place_id,\n            include: false,\n            location: target.geometry.location,\n            icon: target.icon,\n            vicinity: target.vicinity,\n            rating: target.rating,\n            votes: 0,\n            currentLocation: latLng,\n            planId: 0\n          };\n          return targetDetail;\n        });\n        Session.set('allTargets', targets);\n      }\n    }\n\n    //create marker for all restaurant locations within radius\n    function createMarker(place) {\n      var placeLoc = place.geometry.location;\n      var marker = new google.maps.Marker({\n        map: map.instance,\n        position: placeLoc,\n        draggable: false,\n        icon: place.icon,\n        animation: google.maps.Animation.DROP\n      });\n\n      var infoWindowContent = '<h5>' + place.name + '</h5>';\n\n      //event listener that loads resturant information into infowindow.\n      google.maps.event.addListener(marker, 'click', function () {\n        if (marker.getAnimation() !== null) {\n          marker.setAnimation(null);\n        } else {\n          marker.setAnimation(google.maps.Animation.BOUNCE);\n        }\n        infowindow.setContent(infoWindowContent);\n        infowindow.open(map.instance, this);\n      });\n      return marker;\n    }\n  });\n});","ast":null,"map":{"version":3,"sources":["/client/views/02-set-launch-target/map.js"],"names":[],"mappings":";AACA,IAAI,QAAQ,GAAG,EAAE,CAAC;AAClB,IAAI,OAAO,CAAC;;;AAGZ,MAAM,CAAC,OAAO,CAAC,YAAW;AACxB,YAAU,CAAC,IAAI,CAAC,EAAE,CAAC,EAAG,GAAG,EAAE,GAAG,EAAG,yCAAyC,EAAE,SAAS,EAAG,iBAAiB,EAAE,CAAC,CAAC;CAC9G,CAAC,CAAC;;;AAGH,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC;;AAEnB,kBAAgB,EAAG,YAAW;AAC5B,QAAI,KAAK,GAAG,WAAW,CAAC,KAAK,EAAE,CAAC;AAChC,WAAO,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC;GAC/B;;;AAGD,YAAU,EAAG,YAAW;AACtB,QAAI,MAAM,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC;AAClC,WAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;;;AAG9B,QAAI,UAAU,CAAC,MAAM,EAAE,IAAI,MAAM,EAAE;AACjC,aAAO;AACL,cAAM,EAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC;AACvD,YAAI,EAAG,QAAQ;;AAEf,cAAM,EAAE,CAAC,EAAC,aAAa,EAAC,KAAK,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,gBAAgB,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,wBAAwB,EAAC,aAAa,EAAC,iBAAiB,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,yBAAyB,EAAC,aAAa,EAAC,iBAAiB,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,WAAW,EAAC,aAAa,EAAC,UAAU,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,IAAI,EAAC,EAAC,EAAC,OAAO,EAAC,SAAS,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,WAAW,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,oBAAoB,EAAC,aAAa,EAAC,eAAe,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,GAAG,EAAC,EAAC,EAAC,WAAW,EAAC,GAAG,EAAC,EAAC,EAAC,QAAQ,EAAC,MAAM,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,oBAAoB,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,mBAAmB,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,KAAK,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,EAAC,EAAC,WAAW,EAAC,GAAG,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,KAAK,EAAC,aAAa,EAAC,eAAe,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,YAAY,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,KAAK,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,gBAAgB,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,YAAY,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,gBAAgB,EAAC,aAAa,EAAC,UAAU,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,YAAY,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,gBAAgB,EAAC,aAAa,EAAC,eAAe,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,YAAY,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,gBAAgB,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,cAAc,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,cAAc,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,gBAAgB,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,YAAY,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,gBAAgB,EAAC,aAAa,EAAC,UAAU,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,gBAAgB,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,aAAa,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,UAAU,EAAC,aAAa,EAAC,eAAe,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,IAAI,EAAC,EAAC,EAAC,OAAO,EAAC,SAAS,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,sBAAsB,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,YAAY,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,oBAAoB,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,MAAM,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,OAAO,EAAC,SAAS,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,MAAM,EAAC,aAAa,EAAC,UAAU,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,IAAI,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,MAAM,EAAC,aAAa,EAAC,eAAe,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,GAAG,EAAC,EAAC,EAAC,WAAW,EAAC,IAAI,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,MAAM,EAAC,aAAa,EAAC,iBAAiB,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,IAAI,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,MAAM,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,SAAS,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,SAAS,EAAC,aAAa,EAAC,aAAa,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,cAAc,EAAC,aAAa,EAAC,UAAU,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,cAAc,EAAC,aAAa,EAAC,aAAa,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,iBAAiB,EAAC,aAAa,EAAC,KAAK,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,yBAAyB,EAAC,aAAa,EAAC,UAAU,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,yBAAyB,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,OAAO,EAAC,aAAa,EAAC,UAAU,EAAC,SAAS,EAAC,CAAC,EAAC,OAAO,EAAC,SAAS,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,OAAO,EAAC,aAAa,EAAC,eAAe,EAAC,SAAS,EAAC,CAAC,EAAC,WAAW,EAAC,KAAK,EAAC,EAAC,EAAC,YAAY,EAAC,IAAI,EAAC,EAAC,EAAC,OAAO,EAAC,SAAS,EAAC,CAAC,EAAC,EAAC,EAAC,aAAa,EAAC,OAAO,EAAC,aAAa,EAAC,QAAQ,EAAC,SAAS,EAAC,CAAC,EAAC,YAAY,EAAC,KAAK,EAAC,CAAC,EAAC,CAAC;;OAE3sH,CAAC;KACH;GACF;AACD,YAAU,EAAG,YAAY;AACvB,WAAO,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;GAClC;CACF,CAAC,CAAC;;;AAGH,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,YAAW;AAChC,MAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,YAAU,CAAC,KAAK,CAAC,KAAK,EAAE,UAAS,GAAG,EAAE;;;AAGpC,QAAI,MAAM,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC;;;AAGlC,QAAI,WAAW,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;;;AAGjE,QAAI,UAAU,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;;;AAG9C,QAAI,QAAQ,GAAG;AACf,UAAI,EAAE,0EAA0E;AAChF,eAAS,EAAE,QAAQ;AACnB,iBAAW,EAAE,GAAG;AAChB,WAAK,EAAE,GAAG;AACV,iBAAW,EAAE,MAAM;AACnB,kBAAY,EAAE,CAAC;KAChB,CAAC;;;AAGA,QAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;AAClC,cAAQ,EAAG,WAAW;AACtB,SAAG,EAAG,GAAG,CAAC,QAAQ;AAClB,UAAI,EAAE,QAAQ;AACd,eAAS,EAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI;KACvC,CAAC,CAAC;;AAEH,QAAI,iBAAiB,GACjB,uBAAuB,CAAC;;;AAG5B,UAAM,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,EAAE,YAAW;AACxD,gBAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;AACzC,gBAAU,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;KACrC,CAAC,CAAC;;;;AAIH,QAAI,OAAO,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACjE,WAAO,CAAC,YAAY,CAAC;AACnB,cAAQ,EAAG,WAAW;AACtB,YAAM,EAAG,IAAI;AACb,WAAK,EAAG,CAAC,QAAQ,EAAE,MAAM,EAAE,YAAY,CAAC;KACzC,EAAE,QAAQ,CAAC,CAAC;;;AAGb,aAAS,QAAQ,CAAC,OAAO,EAAE,MAAM,EAAE;AACjC,UAAI,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,EAAE,EAAE;;AAExD,YAAI,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,MAAM,EAAE;AAC1C,sBAAY,CAAC,MAAM,CAAC,CAAC;AACrB,cAAI,YAAY,GAAG;AACjB,gBAAI,EAAG,MAAM,CAAC,IAAI;AAClB,mBAAO,EAAG,MAAM,CAAC,QAAQ;AACzB,mBAAO,EAAG,KAAK;AACf,oBAAQ,EAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ;AACnC,gBAAI,EAAG,MAAM,CAAC,IAAI;AAClB,oBAAQ,EAAG,MAAM,CAAC,QAAQ;AAC1B,kBAAM,EAAG,MAAM,CAAC,MAAM;AACtB,iBAAK,EAAG,CAAC;AACT,2BAAe,EAAG,MAAM;AACxB,kBAAM,EAAG,CAAC;WACX,CAAC;AACF,iBAAO,YAAY,CAAC;SACrB,CAAC,CAAC;AACH,eAAO,CAAC,GAAG,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;OACpC;KACF;;;AAGD,aAAS,YAAY,CAAC,KAAK,EAAE;AAC3B,UAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC;AACvC,UAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;AAClC,WAAG,EAAG,GAAG,CAAC,QAAQ;AAClB,gBAAQ,EAAG,QAAQ;AACnB,iBAAS,EAAG,KAAK;AACjB,YAAI,EAAG,KAAK,CAAC,IAAI;AACjB,iBAAS,EAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI;OACvC,CAAC,CAAC;;AAEH,UAAI,iBAAiB,GACnB,MAAM,GAAG,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC;;;AAGhC,YAAM,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,EAAE,YAAW;AACxD,YAAI,MAAM,CAAC,YAAY,EAAE,KAAK,IAAI,EAAE;AAChC,gBAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;SAC3B,MAAM;AACL,gBAAM,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;SACnD;AACH,kBAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;AACzC,kBAAU,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;OACrC,CAAC,CAAC;AACH,aAAO,MAAM,CAAC;KACf;GACF,CAAC,CAAC;CACJ,CAAC,CAAC","file":"/client/views/02-set-launch-target/map.js.map","sourcesContent":["//Global variable for setting default zoom in google maps\nvar MAP_ZOOM = 16;\nvar results;\n\n//When app starts load google maps\nMeteor.startup(function() {\n  GoogleMaps.load({ v : '3', key : 'AIzaSyAG_bYopvQf3H2lrQBNfKJyo4fic2ETdFI', libraries : 'geometry,places' });\n});\n\n//Pull latitude and longitude from google maps api and return location zoom\nTemplate.map.helpers({\n  //If there is an error finding the current users geoloaction - spit out error to the DOM\n  geolocationError : function() {\n    var error = Geolocation.error();\n    return error && error.message;\n  },\n\n  //Set out map options\n  mapOptions : function() {\n    var latLng = Geolocation.latLng();\n    Session.set('latLng', latLng);\n\n    //Initialize the map once we  have the latLng.\n    if (GoogleMaps.loaded() && latLng) {\n      return {\n        center : new google.maps.LatLng(latLng.lat, latLng.lng),\n        zoom : MAP_ZOOM,\n        // This is where you would paste any style found on Snazzy Maps.\n        styles: [{\"featureType\":\"all\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"administrative\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"administrative.country\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"administrative.province\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"landscape\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#e3e3e3\"}]},{\"featureType\":\"landscape\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"landscape.man_made\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"saturation\":\"0\"},{\"lightness\":\"6\"},{\"weight\":\"0.90\"}]},{\"featureType\":\"landscape.man_made\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"landscape.natural\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"},{\"lightness\":\"0\"}]},{\"featureType\":\"poi\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"visibility\":\"simplified\"}]},{\"featureType\":\"poi\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.attraction\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"simplified\"}]},{\"featureType\":\"poi.attraction\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"simplified\"}]},{\"featureType\":\"poi.attraction\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"visibility\":\"simplified\"}]},{\"featureType\":\"poi.attraction\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.government\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"simplified\"}]},{\"featureType\":\"poi.government\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.government\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.medical\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.park\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#e6f0d7\"}]},{\"featureType\":\"poi.place_of_worship\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.school\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.sports_complex\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"road\",\"elementType\":\"all\",\"stylers\":[{\"color\":\"#cccccc\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"saturation\":\"0\"},{\"lightness\":\"30\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"road\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"transit\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"transit\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"transit.line\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"transit.line\",\"elementType\":\"labels.text\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"transit.station\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"transit.station.airport\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"transit.station.airport\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"water\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#FFFFFF\"}]},{\"featureType\":\"water\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"lightness\":\"-28\"},{\"saturation\":\"33\"},{\"color\":\"#f2f8fd\"}]},{\"featureType\":\"water\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]}]\n\n      };\n    }\n  },\n  allTargets : function () {\n    return Session.get('allTargets');\n  }\n});\n\n//Create google maps marker for current location\nTemplate.map.onCreated(function() {\n  var self = this;\n\n  GoogleMaps.ready('map', function(map) {\n    //get lat and long from current location\n    //IDEA: after getting the current location - save to a session variable so we can use and reuse it.\n    var latLng = Geolocation.latLng();\n\n    //variable within scope that sets current location\n    var currentPost = new google.maps.LatLng(latLng.lat, latLng.lng);\n\n    //variable that creates a new instance of marker information display\n    var infowindow = new google.maps.InfoWindow();\n\n     //Gold star SVG to mark current location\n    var goldStar = {\n    path: 'M 125,5 155,90 245,90 175,145 200,230 125,180 50,230 75,145 5,90 95,90 z',\n    fillColor: 'yellow',\n    fillOpacity: 0.8,\n    scale: .25,\n    strokeColor: 'gold',\n    strokeWeight: 5\n  };\n\n    //drop marker on current location\n    var marker = new google.maps.Marker({\n      position : currentPost,\n      map : map.instance,\n      icon: goldStar,\n      animation : google.maps.Animation.DROP\n    });\n\n    var infoWindowContent =\n        '<h5>You are here</h5>';\n\n    //event listener that loads resturant information into infowindow.\n    google.maps.event.addListener(marker, 'click', function() {\n      infowindow.setContent(infoWindowContent);\n      infowindow.open(map.instance, this);\n    });\n\n    //get surrounding restaurants within radius\n    //call on the document of food which is an array of objects\n    var service = new google.maps.places.PlacesService(map.instance);\n    service.nearbySearch({\n      location : currentPost,\n      radius : 1500,\n      types : ['bakery', 'food', 'restaurant']\n    }, callback);\n\n    //Error checking to check for status of query\n    function callback(results, status) {\n      if (status === google.maps.places.PlacesServiceStatus.OK) {\n\n        var targets = results.map(function (target) {\n          createMarker(target);\n          var targetDetail = {\n            name : target.name,\n            placeId : target.place_id,\n            include : false,\n            location : target.geometry.location,\n            icon : target.icon,\n            vicinity : target.vicinity,\n            rating : target.rating,\n            votes : 0,\n            currentLocation : latLng,\n            planId : 0\n          };\n          return targetDetail;\n        });\n        Session.set('allTargets', targets);\n      }\n    }\n\n    //create marker for all restaurant locations within radius\n    function createMarker(place) {\n      var placeLoc = place.geometry.location;\n      var marker = new google.maps.Marker({\n        map : map.instance,\n        position : placeLoc,\n        draggable : false,\n        icon : place.icon,\n        animation : google.maps.Animation.DROP\n      });\n\n      var infoWindowContent =\n        '<h5>' + place.name + '</h5>';\n\n      //event listener that loads resturant information into infowindow.\n      google.maps.event.addListener(marker, 'click', function() {\n        if (marker.getAnimation() !== null) {\n            marker.setAnimation(null);\n          } else {\n            marker.setAnimation(google.maps.Animation.BOUNCE);\n          }\n        infowindow.setContent(infoWindowContent);\n        infowindow.open(map.instance, this);\n      });\n      return marker;\n    }\n  });\n});\n"]},"hash":"cc605096b28ae335309cd92893bbc68c9545de9a"}
